/*!build time : 2015-03-30 2:29:18 PM*/
KISSY.add("kg/tb-video-player/2.0.0/index",function(a,b,c,d,e){function f(){var b={};if(a.UA.mobile)switch(b.isPC=!1,b.isMobile=!0,a.UA.os){case"ios":b.equipmentType=a.UA.ipad?2:3;break;case"android":b.equipmentType=a.UA.android<3?6:5;break;default:b.equipmentType=6}else b.isPC=!0,b.isMobile=!1,b.equipmentType=1;return b}function g(b){var c=new RegExp(/\d+$/i);if(!c.test(b.vid))return void a.log(b.vid+"is illegal!");var d="//cloud.video.";return d+=b.isDaily?"daily.taobao.net":"taobao.com",d+="/play/u/",d+=b.uid+"/p/",d+=(b.isAutoPlay?1:2)+"/e/",d+=l.equipmentType+"/t/",d+=b.tid+"/",d+=b.vid+".",d+=1===l.equipmentType?"swf":a.inArray(l.equipmentType,[2,3,5])?"m3u8":"mp4"}function h(a,b){b.flashvars.autoplay=b.isAutoPlay,b.flashvars.poster=b.poster,b.showloadinglogo||(b.flashvars.reservelt=9527),b.flashvars.show_controlbar_logo=b.showlogobtn,b.flashvars.show_fullscreen_button=b.showfullscreenbtn,b.flashvars.show_share_button=b.showsharebutton,b.flashvars.playerid=a}function i(b,c){var d=this;i.superclass.constructor.call(d,b,c);var e=a.merge(m,b);d._video_url=g(e),d._guid=a.guid("TbVideoPlayer-"),d._init(e,c)}var j="",k=b.all,l=f(),m={vid:j,uid:"727053408",tid:"1",isAutoPlay:!1,width:"100%",height:"100%",isDaily:!1,container:"body",allowScriptAccess:"always",wmode:"transparent",allowFullScreen:!0,poster:j,flashvars:{},showloadinglogo:!0,showlogobtn:!1,showfullscreenbtn:!0,showsharebutton:!0};return a.extend(i,c,{_init:function(b,c){var f=this,g=f._guid;h(g,b);var i="string"==typeof b.container?d.get(b.container):b.container;if(l.isPC)f._swf=new e({src:f._video_url,attrs:{width:b.width,height:b.height,id:g},params:{wmode:b.wmode,allowScriptAccess:b.allowScriptAccess,allowFullScreen:b.allowFullScreen,flashVars:b.flashvars},render:i}),f._destroy=function(){f._swf.destroy()},f._play=function(){f._swf.callSWF("resume")},f._pause=function(){f._swf.callSWF("pause")};else{if(!l.isMobile)return void a.log("Neither PC or Mobile, tell me what to do...");var j=d.create("<video>",{width:b.width,height:b.height,controls:"controls",src:f._video_url,id:g});b.poster&&d.attr(j,"poster",b.poster),b.isAutoPlay&&d.attr(j,"autoplay","autoplay"),d.append(j,i),f._destroy=function(){k("#"+g).detach().remove()},f._play=function(){d.get("#"+g).play()},f._pause=function(){d.get("#"+g).pause()}}"function"==typeof c&&c(d.get("#"+g))},destory:function(){this._destroy()},destroy:function(){this._destroy()},pause:function(){this._pause()},play:function(){this._play()}},{ATTRS:{}}),i},{requires:["node","base","dom","swf"]});